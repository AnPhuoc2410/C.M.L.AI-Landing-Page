# âœ… CHECKLIST FIX Lá»–I 401 - IN RA VÃ€ LÃ€M THEO

## ğŸ“‹ LÃ m theo thá»© tá»± tá»« trÃªn xuá»‘ng:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  BÆ¯á»šC  â”‚  VIá»†C Cáº¦N LÃ€M                     â”‚  âœ“ XONG       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   1    â”‚ Má»Ÿ Google Sheet                   â”‚  [ ]          â”‚
â”‚        â”‚ Link: https://docs.google.com/... â”‚               â”‚
â”‚        â”‚                                    â”‚               â”‚
â”‚   2    â”‚ ThÃªm header dÃ²ng 1 náº¿u chÆ°a cÃ³   â”‚  [ ]          â”‚
â”‚        â”‚ TÃªn | GTTD | Tiá»n | Äiá»ƒm | NgÃ y  â”‚               â”‚
â”‚        â”‚                                    â”‚               â”‚
â”‚   3    â”‚ Extensions â†’ Apps Script          â”‚  [ ]          â”‚
â”‚        â”‚                                    â”‚               â”‚
â”‚   4    â”‚ XÃ³a code cÅ©, paste code má»›i      â”‚  [ ]          â”‚
â”‚        â”‚ File: GoogleAppsScript.js         â”‚               â”‚
â”‚        â”‚ Save (Ctrl+S)                     â”‚               â”‚
â”‚        â”‚                                    â”‚               â”‚
â”‚   5    â”‚ âš ï¸ AUTHORIZE (QUAN TRá»ŒNG!)        â”‚  [ ]          â”‚
â”‚        â”‚ - Chá»n function: doPost           â”‚               â”‚
â”‚        â”‚ - Nháº¥n Run â–¶ï¸                      â”‚               â”‚
â”‚        â”‚ - Review Permissions â†’ Allow      â”‚               â”‚
â”‚        â”‚ - Advanced â†’ Go to project        â”‚               â”‚
â”‚        â”‚                                    â”‚               â”‚
â”‚   6    â”‚ Test: Run function testPermissionsâ”‚  [ ]          â”‚
â”‚        â”‚ Pháº£i tháº¥y "âœ… Permissions OK!"    â”‚               â”‚
â”‚        â”‚                                    â”‚               â”‚
â”‚   7    â”‚ Deploy â†’ New deployment           â”‚  [ ]          â”‚
â”‚        â”‚ - Type: Web app                   â”‚               â”‚
â”‚        â”‚ - Execute as: Me                  â”‚               â”‚
â”‚        â”‚ - Who has access: Anyone          â”‚               â”‚
â”‚        â”‚                                    â”‚               â”‚
â”‚   8    â”‚ Copy URL deployment               â”‚  [ ]          â”‚
â”‚        â”‚ Format: https://.../exec          â”‚               â”‚
â”‚        â”‚                                    â”‚               â”‚
â”‚   9    â”‚ Test URL trong browser            â”‚  [ ]          â”‚
â”‚        â”‚ Pháº£i tháº¥y JSON {"success": true}  â”‚               â”‚
â”‚        â”‚                                    â”‚               â”‚
â”‚   10   â”‚ Paste URL vÃ o .env                â”‚  [ ]          â”‚
â”‚        â”‚ VITE_SHEET_URL=https://...        â”‚               â”‚
â”‚        â”‚                                    â”‚               â”‚
â”‚   11   â”‚ Restart dev server                â”‚  [ ]          â”‚
â”‚        â”‚ Ctrl+C â†’ npm run dev              â”‚               â”‚
â”‚        â”‚                                    â”‚               â”‚
â”‚   12   â”‚ Test game: ChÆ¡i â†’ Tháº¯ng â†’ LÆ°u    â”‚  [ ]          â”‚
â”‚        â”‚ Check Sheet cÃ³ data má»›i           â”‚               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âš ï¸ BÆ¯á»šC THÆ¯á»œNG Bá»Š Bá» QUA:

### ğŸ”´ BÆ¯á»šC 5 - AUTHORIZE
**ÄÃ¢y lÃ  bÆ°á»›c QUAN TRá»ŒNG NHáº¤T!**

Náº¿u khÃ´ng authorize, Apps Script sáº½ tráº£ vá» lá»—i 401!

```
Apps Script Editor
â”œâ”€ Function dropdown: [chá»n "doPost"]
â”œâ”€ Nháº¥n Run â–¶ï¸
â”œâ”€ Popup "Authorization required"
â”‚  â”œâ”€ Review Permissions
â”‚  â”œâ”€ Chá»n tÃ i khoáº£n
â”‚  â”œâ”€ "Google hasn't verified" â†’ Advanced
â”‚  â””â”€ "Go to CMLAI_Game_API" â†’ Allow
â””â”€ âœ… Xong!
```

### ğŸ”´ BÆ¯á»šC 7 - DEPLOY SETTINGS
**Pháº£i chá»n Ä‘Ãºng "Who has access"!**

```
âŒ SAI: "Only myself" â†’ Lá»—i 401
âŒ SAI: "Anyone with Google account" â†’ Lá»—i 401
âœ… ÄÃšNG: "Anyone" â†’ OK!
```

### ğŸ”´ BÆ¯á»šC 9 - TEST URL
**Pháº£i test trong browser TRÆ¯á»šC KHI dÃ¹ng trong game!**

```
Browser â†’ Paste URL â†’ Enter
â†“
âœ… Tháº¥y JSON â†’ OK, tiáº¿p tá»¥c
âŒ Lá»—i 401 â†’ Quay láº¡i bÆ°á»›c 5 hoáº·c 7
```

### ğŸ”´ BÆ¯á»šC 11 - RESTART SERVER
**PHáº¢I restart Ä‘á»ƒ .env Ä‘Æ°á»£c load láº¡i!**

```
Terminal:
Ctrl+C (Stop server)
npm run dev (Start láº¡i)
```

---

## ğŸ” QUICK DEBUG

Náº¿u váº«n lá»—i 401, kiá»ƒm tra:

```javascript
// 1. Paste vÃ o Console (F12) trong game:
console.log(import.meta.env.VITE_SHEET_URL);

// 2. Pháº£i in ra URL Ä‘Ãºng, giá»‘ng trong .env
// 3. Náº¿u undefined â†’ ChÆ°a restart server
// 4. Náº¿u URL cÅ© â†’ ChÆ°a cáº­p nháº­t .env Ä‘Ãºng
```

```powershell
# 5. Kiá»ƒm tra .env trong terminal:
Get-Content .env

# Pháº£i tháº¥y:
# VITE_SHEET_URL=https://script.google.com/macros/s/.../exec
```

---

## ğŸ“ CONTACT

Náº¿u lÃ m háº¿t checklist mÃ  váº«n lá»—i, gá»­i:
1. Screenshot deployment settings
2. Response khi test URL trong browser
3. Console log (F12) tá»« game

---

**Print checklist nÃ y ra vÃ  check tá»«ng bÆ°á»›c!** âœ…
